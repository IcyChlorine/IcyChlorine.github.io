{"pages":[],"posts":[{"title":"Hello World","text":"这是一篇Hello World 文章! 因为有一些文章内容公式太多，不太适合放在微信公众号，于是就花了点时间，不务正业地部署了一个个人博客。既是一种新的分享自己的想法的渠道，也是微信公众号的一种延伸。 近几天应该会把这学期写的一篇关于傅里叶变换的文章和一篇关于放大电路的文章放上来，hope you enjoy reading XD. 另：既然文章名字叫Hello world，还是来喊几声hello world吧: bash:1$ printf &quot;Hello world!&quot; Python:1&gt;&gt;&gt;print(&quot;Hello world!&quot;) C++:1234567#include&lt;iostream&gt;using namespace std;int main(){ cout&lt;&lt;&quot;Hello world!&quot;&lt;&lt;endl; return 0;}","link":"/2021/04/03/hello-world/"},{"title":"从二极管到放大器-手把手教你理解放大电路","text":"李辰剑/IcyChlorine 2021-3-22 引言大二上时上了《现代电子线路及实验(上)》, 从一开始就被三极管打懵了, 自己的“电路观”被崩塌了. 但不幸的是, 打破之后, 新的电路观却并没有建立起来(至少没有建立完整), 只得懵懵懂懂地被拖着学完了放大电路. 如今时隔一年半, 我在大三下又选上了电线实验, 倒也又给我一个机会接触并了解电子电路. 于是我便打算借着这个机会, 把之前没搞清楚的一些模拟电路概念、以及难点重新梳理一下, 一来完善自己的知识结构, 二来也是为后来者铺路. 对于只学过中学电路的同学而言, 从“学前电路”(大学前电路)到大学的电子电路, 当中有着巨大的鸿沟, 学习曲线相当陡峭——因为有些概念和电路观念的转变老师不说, 教材也不写, 初来乍到很难理解. 注意: 这篇文章与物理学院选修《现代电子线路及实验(上)》的同学是最契合的; 如果你是EE专业的, 这篇文章可能对于你来说太trivial、或者太简单了, 还请选择性阅读. XD 1 晶体管这一部分主要是二极管和三极管；二者的基础知识我就不赘述了, 各个教材上汗牛充栋, 网上也有许多资料. 这里贴两个知乎的教程： 知乎：仅此一文, 看懂二极管的所有基础知识点 知乎：三极管的原理书上都讲不清楚, 为什么能被制造出来? 二极管的文章较为平庸, 是非常平常的讲解方式；三极管的文章却是非常优秀的, 提到了许多教科书都不会讲的观点. 为了进行接下来我们的讨论, 我先放几张图： PN结 这是前述知乎教程中的二极管示意图. 看似简单, 仔细想想却有着许多问题： 当中的耗尽区, 电子和空穴相互抵消=&gt;载流子耗尽形成短路. 但是同样在好进去, 有没有可能新的电子从离子实周围被电离出来, 形成电子和空穴分别向N区和P区移动, 形成电流？ 在P型半导体和N型半导体间形成了单向导通的PN结；但是我们知道, 二极管两侧相连的是金属导线(至少, 有可能是), 而金属导线的主要载流子是电子, 是一种”N型导体“. 那在金属导线与P区接触的地方, 会不会形成PN结呢？或者说, 为什么没有形成PN结呢？ NPN型三极管 上面这副图是教程中的NPN三极管示意图. 在大多数基础电子教程中, 三极管的原理是BE间加偏压(&gt;0)形成电流(从而电子运动方向E-&gt;B), 但是让C区N型半导体“兜”住大多数跑过来的电子. 这在任何一个学过中学电路——乃至电磁学电路——的人看来, 都有些奇怪, 甚至不可理喻. 向来, 在认知中, 电子运动的模型是电路, 是由电压决定了电流的大小；电子被限制在电路当中, 电压在哪里, 电子就沿着哪条路走. 然而, 在上图中, BE间加了偏压以生成电子流, 大多数电子却走了CE的通路；远离电压电阻和导纳, 却去直接操控电子的运动——这便是三极管的原理显得奇怪的地方了. 它在许多地方都与我们传统的电路观相抵触. 为了解决上述的这些问题, 或者说, 至少, 打消这些疑问以使我们能愉快地学习放大电路, 我们需要一些额外的知识, 还需要改变一下思维方式. 历史上, 最早的二极管是所谓的电子二极管(1904), 基于阴极射线原理： 电子二极管 其原理非常简单粗暴, 灯丝受热, 发出电子；但是只有一端灯丝加热, 是的这一过程只能单向进行, 从而形成单向导通的“二极管”. 灯丝加热电子逸出的图像, 虽然不在传统的电路范畴内, 但物理图像过于简单粗暴, 因此也还算能让人接受. 这种二极管体积大、加热灯丝功耗大, 还要预热…缺点非常多. 于是到了1947年, 美国人发明了如今常见的半导体二极管. 而历史上, 三极管的加工工艺也是通过不断改进, 才达到了如今的水平. NPN三极管加工工艺中, 要求中心P区“尽可能薄而面积大”, 就是通过工艺水平逆天改命. 具体来说, 就是让P区充分狭长, 从而使得运动极慢的电子可以打破简单的欧姆定律和电路规律；通过让路转得“充分急“, 让电子“开车开到路外边去”, 实现电流重定向功能. 事实上, 如果简单地将两个PN结二极管并联, 是绝对达不到NPN型三极管的效果的. 我做近物实验时, 有幸选了一项与二极管有关的实验, 需要测量二极管的各种参数；我当时想借着这个机会进一步了解一下二极管, 也顺便解决上述提到的两个问题, 于是便去下载了一本《半导体物理》电子书. 谁想, 厚厚的一本电子书从头推到尾, 从各种载流子一步一步建立理论、向前推演, 花了不知道多少时间、写了不知道多少公式、画了不知道多少图, 才得到一些简单有益的结论. 整本书建立在量子力学、固体物理和统计物理的基础上, 采用着这些前沿、精微而复杂的理论, 而远远不是各种电子教科书上采用的简单的二极管图像. 狄拉克梳、能带、载流子多子少子的连续变化……只有用这些概念, 才能真正了解PN结当中到底发生了什么. 原则 1 以上的林林总总告诉我们, 晶体管的特性并不平凡(trivial), 是因为它们不是一簇而就的, 而是许多代人慢慢改良原理、改良工艺的结果. 许多奇怪的特性看上去不太可能, 是因为它们真的不太可能. 它们今天能被放在这里供所有人使用, 本身就是人类科技进步发展的奇迹. 对此, 你： 要么——基于前述认识接受它 要么——如果想要具体了解”不可能“是怎么变成“可能”的, 想要具体了解其中的动力学, 需要花费大量的时间和心力仔细研读《半导体物理学》, 在量子力学和固体物理的基础上把事情弄清楚. 对此, 我建议的选择是： 不管你信不信, 反正我是信了. 这种信任不是盲目的相信, 不是“接触的多了”之后形成的麻木的相信；而是对前人改进了无数次的工艺的信任, 是对前人投入了心血才实现的事物的信任, 是基于科学的相信. 这里再多嘴一句. 前述的NPN型三极管中, 虽然大部分电流都能被C极收集, 但仍有小部分电流会走过BE间的通路. 那工艺能不能进一步改进, 让BE间电流更小, 或者干脆没有, 实现完全理想的电操控开关呢？答案是肯定的——这就是场效应管, 在物院的电线理论中不教. (虽然教科书上有) 2 放大电路接下来, 我们就要从晶体管出发, 一步步探寻前方未知的道路, 最终形成人类智慧的结晶——放大电路. 放大电路有什么用？我想, 这是每一个学模拟电路、放大电路的同学都会问的问题. 事实上, 我觉得现在回答这个问题为时过早；我们将会在合适的时候回顾这个问题. 事实上的事实上——我们现在连”放大”具体的含义都不清楚. 让我们从三极管开始. 三极管的输出特性曲线 这是一张晶体三极管的输出特性曲线图. 我们前面说过, 三极管是一种让电子“走歪路”的器件, 在BE-PN结间加电压, 却让集电极C收走了绝大多数电子；简而言之, 就是让$u_{BE}$打工产生电流, 却在BC间的PN结截留、让C收走绝大多数电子. 正是这种BE打工拿小头、CE集电赚大头的工作方式, 让BE-CE间的放大成为可能. 根据这个模型, 我们可以得到一个粗略的公式： i_{CE}=\\beta i_{BE}\\label{tri-coarse1:ampl}\\tag{1}其中$\\beta$表示三极管的放大系数, 往往在$10^2$量级. 这个公式当然是非常粗略的, 与上图也符合得不好；后面还将在许多地方完善, 但这是描述我们模型的第一步. 值得注意的是, 在这个模型中, 关键是电流间的控制和放大. 我们这里提前给出原则2： 原则 2(原型) 在放大电路中, 三极管是一种电流控制原件, 即, $i_{CE}$强烈的依赖于$i_{BE}$, 而非由电压决定. 这与传统的电压*决定电流、 **电压**决定电路状况*的电路范式是不同的. 为了更好地抢夺$i_{BE}$,CE间往往会加上正向电压$u_{CE}$以促使电子在电场的作用下涌向集电极C. 不难理解, 抢夺到的$i_{CE}$将会随着$u_{CE}$的增大而增大. 但事实上, 当$u_{CE}$增大到一定程度以后, 再增大, $i_{CE}$的增大就会变得非常缓慢, 仿佛遇到了一个天花板, 就好像饱和了似的. 但tricky的是, 这对应了上图中的放大区, 而饱和区却对应了曲线陡峭上升的阶段. 这是因为, 在放大区, C极对$u_{CE}$的剥削达到了极限, 也只有在这里才能稳定获得前述$i_{CE}=\\beta i_{BE}$的关系, 实现电流放大功能. 从饱和区来到放大区的临界电压成为饱和电压, 典型的数据是$u_{CE}^S=0.3V$,其中上标$S$代表饱和(Saturated).而至于饱和区的功能, 则在放大电路中一般不用, 在数字电路中较为常用. 我们发现, 实现$\\eqref{tri-coarse1:ampl}$式所描述的剥削放大并不是无条件的, 而是需要一定的$u_{CE}$条件. 这就好像资本家想要剥削工人, 完全不给工资肯定是不行的, 至少要给一些基本的足够生存的工资, 工人们才愿意为之卖命. 这一$u_{CE}$的条件, 是一个工作点, 描述了三极管实现某一功能的额外条件. 类似$u_{CE}$, 工作在放大区对$u_{BE}$也有要求. 非常简单, 要有足够的电压保证BE间的PN结能够打开——否则整个三极管都是堵住的. 这个开门电压与二极管是一致的, 一般是$u_{BE}^Q=0.7V$,其中$Q$表示工作点. 如果说前面$u_{BE}$的工作点条件是剥削条件的话, 那么这里的这个工作点条件, 我会称之为劳动力条件, 代表三极管工作的基础电压条件. 接地的NPN型三极管 到了这里, 我们已经可以设计出以三极管为核心的放大电路原型：BE间(左下两极)提供微小电流源$i_{BE}=i_{in}$, 并提供足够的开门电压$u_{BE}$,CE间提供足够的抢电子电压, 从而, CE间的电流就是被放大的电流$i_{CE}=\\beta i_{in}=i_{ampl}=i_{out}$. 但问题在于, 一般的原件要么提供电压决定电流, 要么提供电流决定电压, 哪有同时提供电压和电流的？如何同时在BE间提供/控制工作点电压和待放大的微小电流源？这是我们遇到的第一个技术难点, 为了解决这个问题, 我们需要稍微研究一下BE间的伏安特性. 三极管的输入特性曲线 我们首先简化一下记号. 由于前述的BE间电流$i_{BE}$最终从B端流出, 可以简记为$i_B$; 而同理$i_{CE}$可以简记为$i_C$. 类似地, 我们还可以定义从发射极流过的电流$i_E$——根据电流守恒定律, $i_E=i_{BE}+i_{CE}=i_B+i_C$. 上面是三极管的伏安特性曲线图, 也叫输入特性曲线图, 描述了BE间的伏安特性. 之所以叫输入特性, 是因为BE二极往往是需要放大的微小电流的输入端. 可以看到, 由于BE间是二极管结构, 伏安曲线与二极管类似, 开门后呈指数上升的态势. 同时, BE间的伏安特性并不是与集电极完全无关的, 集电极的剥削也会对输入特性有影响. 当剥削电压增大, 开门电压便会变高, 开门变得更困难, 这是不难理解的；但$u_{CE}$对输入特性的影响总体有限, 尤其是在饱和(进入放大区)之后影响更小；因此, 输入特性和输出特性是可以大致脱耦的, 即, 可近似认为放大区中输入特性曲线与$u_{CE}$无关. 有了输入特性曲线, 我们就可以确定工作点电压和输入小电流间的关系了. 这里产生了两个问题： 工作点电压和输入电流之间是有一一对应的关系的；当电压确定, 电流就无法变化；当电流变化, 电压就会不确定. 如何同时满足二者？ 曲线是非线性的, 不利于控制. 到了这里, 我们仿佛走入了死胡同. 但天才的工程师们还是想出了办法：直流偏置, 微变放大. 为了说明个中的思想, 我们先借鉴一下另一个概念. 在生物学中, 人体的内环境被总结为四个字：相对稳定, 动态平衡；具体来说, 人体的体温总体稳定在37度上下, 便于各个生物组件发挥正常作用, 但这并不妨碍人体体温会在时间跨度上有着微小变化. 例如, 睡眠时体温相对较低, 剧烈运动后体温较高而使人感到非常热. 动态的小变化并不妨碍整体处在工作点附近, 相反, 还帮助适应环境. 我们来看看这一思想是怎么被运用到三极管放大电路中的. 三极管的输入特性曲线 当$u_{BE}$大体在$0.7V+$时, 在其上叠加一个小电压信号$\\delta u_{BE}(t)\\sim mV$,那将会导致$i_{B}$的微小变化$\\delta i_B(t)$. 我们可以写出： \\delta i_B=\\left.\\frac{\\mathrm di_B(u_{BE})}{\\mathrm d u_{BE}}\\right|_{u_{BE}=u_{BE}^Q}\\cdot\\delta u_{BE}\\label{delta_ib}\\tag{2}进一步地, 三极管对电流的放大作用可以表示为： i_B=i_B^Q+\\delta i_B,i_C=i_C^Q+\\delta i_C\\\\ i_C=\\beta i_B\\\\ \\Rightarrow\\delta i_C=\\beta\\delta i_B\\label{delta_ib_ampl}\\tag{3}我们稍稍分析一下这两个公式： $\\eqref{delta_ib}$告诉我们, 我们需要操控电压$u_{BE}$来控制电流$i_B$;事实上, 这反而更方便, 因为需要被放大的往往是电压信号而非电流信号 $\\eqref{delta_ib}$还意味着, 当三极管工作在工作点$u_{BE}^Q$附近, 导数项近似为不变, 微变电压$\\delta u_{BE}$和微变电流$\\delta i_B$之间又恢复了线性关系, 这会给我们后续工作带来许多便利. 这也启发我们, 可以把这个不变的导数项等效为一个“微变电阻”$r_{BE}$, 于是我们得到： r_{BE}:=\\left(\\left.\\frac{\\mathrm di_B(u_{BE})}{\\mathrm d u_{BE}}\\right|_{u_{BE}=u_{BE}^Q}\\right)^{-1}\\\\ \\Rightarrow\\delta i_B=\\frac{\\delta u_{BE}}{r_{BE}}\\tag{4} 事实上, 工程中将直流量记为大写, 交变、微变量记为小写. 我们需要将前面的公式稍作改变以符合惯例, 只需要做替换： u_{BE}^Q\\rightarrow U_{BE}^Q,\\quad i_B^Q\\rightarrow I_B^Q\\\\ \\delta u_{BE}\\rightarrow u_{BE},\\quad \\delta i_B\\rightarrow i_B\\tag{5}即可. 其余变量类似. 我们总结一下, 可以得出原则3： 原则 3 三极管中的直流偏置和被放大的微变信号是分离的. 直流偏置提供工作点, 微变信号才是被放大的那个. 二者可以通过电压叠加“耦合”, 放大后再通过通交流的电容将交变信号提取出来. 一言以蔽之, 直流偏置, 交变放大. 到这里, 我们已经从原理上完成了三极管放大电路的构思, 剩下的问题就是如何将构思变化为实际可用的电路. 我们有两个问题： 如何提供工作点？ 如何在工作点$U_{BE}^Q$上叠加$u_{BE}(t)$？ 目前, 就被放大的微变信号而言, 仍然是电压输入-&gt;电流输出. 能否转化为电压输入-&gt;电压输出？ 第一个问题, 最简单的解决方案莫过于直接在BE间和CE间分别连两个$0.7V$和$0.5V$的电源. 但是这比较麻烦, 我们希望最好是可以通过一个$5V$或者$12V$电源, 通过分压等方法解决问题. 第二个问题也挺简单, 根据电压叠加原理, 直接在$U_{BE}^Q$上串联我们的微小信号源$u_{BE}(t)$即可. 但考虑到第一个问题的后一个要求…可能会使问题复杂化. 第三个问题, 有一个巧妙的解决方案, 所幸这里也写得下——在$i_C$流经的地方串联一个电阻$R_C$, 根据$u_R=i_CR_C$即可获得一个与$i_C$正比的电压, 再将这个电压引出来作为输出电压, 就得到了电压输出. 这个电压是否被放大了, 则取决于$R_C$等参数——希望不要得到一个更小的电压, 否则这个解决方案就破产了. 一个进一步的问题是, 电阻与CE串联时, 电阻会有分压, 随着电流变化分压也会变化, 这会不会影响到三极管？我们会不会需要解一个复杂的非线性方程？幸运的是, 由于微变电压很小, 三极管在放大区的输出电流又与$U_{CE}$关系很小(曲线很平), 因此可以近似认为三极管的输出电流不随电阻的分压变化而变化. 写了这么多文字分析, 是时候上电路图了： 提供三极管工作点的直流偏置电路分量 这只是完整电路图的一部分, 负责提供工作点条件, 亦即放大电路的“直流分量”. 下面接地是为了方便提供一个参考点, $V_{CC}$是电源, 往往是$5V$或者$12V$.$R_C$与CE端串联, 如前所述；而$R_B$则是为了通过分压提供$U_{BE}^Q$.显然, 只有通过仔细选择电阻大小才能满足工作点条件. 许多同学到了这里可能就犯了难：这既非串联, 亦非并联；而且三极管还是非线性原件, 如何分析？这里我们给出原则4： 原则 4a 不是吧阿sir, 到了大学还只会用欧姆定律求解电路？面对复杂电路, 往往无法直接整个求解；思路要开阔一些, 要善用电压压降条件列方程. 为了具体地分析这个直流分量(“分量”一词来自图论中的“强连通分量”, 本意是一个网络的子网络)电路, 我们先假定一些数据：$V_{CC}=5V,U_{CE}^S=0.5V,U_{BE}^Q=0.7V$. 有了这些还不够. 我们还需要引入三极管的两个非常奇异的特性才能方便地求解这个电路： $U_{CE}&gt;U_{CE}^Q$时, $I_C$几乎不变. 如果作近似, 那就是近似不变. BE间的伏安特性类似二极管；当$U_{BE}$增加至$U_{BE}^Q$以上时, 电流迅速增加；这个区域倒过来看, 就是电压随电流变化很小. 也就是说, 在开门后区域, BE端有稳压的功能, 可以在相当大的电流区间内强行把压降维持在$0.7V$左右. 可以看到, 这是三极管同电阻不同的地方. 进一步地, 这同小电珠等非线性伏安元件也不一样. 为了能愉快地分析这个电路, 我们还有最后一条原则要说： 原则 4b 先假设三极管工作在工作点, 然后再去解为了满足这个条件需要的电路参数；不要试图根据电源电压和电阻等参量去解三极管——由于三极管的非线性是非常不实际的. 事实上, 即使解出来了不在工作点的解, 也没有什么用, 因为并不能用来放大. 工程师们对于解决这一问题的办法可以称为鸵鸟算法——把头埋低, 不去管那些非工作点解. 做了这么多铺垫, 我们终于可以正式开始解工作点了. 根据压降条件, 我们列出方程组： \\left\\{\\begin{aligned} V_{CC}&=I_BR_B+U_{BE}\\\\ V_{CC}&=I_CR_C+U_{CE}\\\\ I_C&=\\beta I_B \\end{aligned}\\right.\\tag{6}式中, 由于三极管的第二个奇异特性, $U_{BE}$总是在$U_{BE}^Q=0.7V$左右, 因此应带入$0.7V$;而$U_{CE}$只需大于$U_{CE}^S$即可, 可以取相当大的范围, 因此数学上反而会由$V_{CC}$和$I_C$确定： U_{CE}=V_{CC}-I_CR_C=V_{CC}-\\beta I_BR_C\\tag{7}在这里, 有意思的事情在于, $U_{CE}$并没有被提供(通过电源或合适的电路设计设置合适的工作点), 而是被$I_B$所决定. 这种奇怪的感觉背后, 反映的是不同原件对于电压电流的不同弹性(Elasticity,这里借鉴了经济学中的概念). 电阻的弹性关系总是线性的, 要让多少电流通过它, 就得提供成比例的电压；但CE端间的弹性, 反映在输出特性曲线上是非常佛系的, 只要电压不要太小(即要求$U_{CE}&gt;U_{CE}^S$), 通过这点电流, 多少电压都可以. 当$I_B$增大、需要输出的$I_C$也成比例增大时, 电阻$R_C$非常强硬, 多抢走了许多电压；而三极管CE端则非常佛系, 就如同一个老实人一般, 于是分压就被抢走. 这是对$R_C$-CE这一串联线路上分压的“动力学分析”, 亦即大家中学所熟悉的电压决定电流的模式. 我进行这部分分析的原因是, 想向大家展示三极管也可以进行“动力学分析”；从电阻电路的分析方式出发分析模拟电路, 构建一个电阻电路-&gt;模拟电路的理解桥梁, 让大家不至于完全另起炉灶构建电路观, 认识到二者是可以统一的. 但如果对每个三极管电路中的地方都这样分析, 未免太过复杂. 因此, 我建议大家接受方程解, 莫问为什么. 进一步, 我们可以将交流信号源叠加上, 得到一个虽简单, 却完整的放大电路： 简单但完整的放大电路 这一电路中, 采取了两电源供电的形式, 因此方程更简单： \\left\\{\\begin{aligned} I_B^Q&=\\frac{V_{BB}-U_{BE}^Q}{R_B}\\\\ I_C^{(Q)}&=\\beta I_B^{(Q)}\\\\ U_{CE}^Q&=V_{CC}-I_C^QR_C \\end{aligned}\\right.\\tag{8}这组方程稍微变换了一下, 写成了更利于分析的形式. 激动人心的时刻到了——接下来考虑微变信号： \\begin{align} u_i=u_i(t)\\Rightarrow i_B(t)&=\\frac{u_i(t)}{R_B+r_{BE}}\\tag{9}\\\\ \\Rightarrow i_C(t)&=\\beta i_B(t)=\\frac{\\beta u_i}{R_B+r_{BE}}\\tag{10}\\\\ \\Rightarrow \\quad U_{C}&=V_{CC}-I_CR_C\\nonumber\\\\ &=V_{CC}-(I_C^Q+i_C)R_C\\tag{11}\\\\ &=V_{CC}-I_C^QR_C-\\frac{\\beta R_C}{R_B+r_{BE}}u_i\\nonumber \\end{align}这里还差一步. 我们需要将微变的小信号取出, 还需要在上图中$u_o$的“+”和三极管的C极之间接一个大电容；这样一来就可以将直流电压去除, 而取出交变电压： u_o(t)=-\\frac{\\beta R_C}{R_B+r_{BE}}u_i(t)\\tag{12}考虑三极管的$\\beta\\sim100$, 只要适当地选区电阻就可以获得$u_o&gt;&gt;u_i$.我们可以很方便地读出放大系数(没错, 它确实小于零, 这意味着反向)： \\dot{A_u}=-\\frac{\\beta R_C}{R_B+r_{BE}}\\tag{13}OHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH！到这里, 我们一步一步, 从三极管、到放大工作点、直流交流分离…一步步分析下来, 终于设计出了一个完整的放大电路. 这其中克服了许多困难, 但这都没有阻拦住我们(事实上是人类历史上电子工程师)的脚步. 这里, 还有几个地方要remark： 上文中, 我常常把“微变”和“交变”混为一谈. 这从概念上来讲当然是不对的微小的电压不一定就是交流电. 但实际上在放大电路中, 往往确实既是“微变”又是“交变”. 在本文中, 在最后加入电容之前, 放大电路只需要“微变”条件即可；但在加入电容后, 为了利用电容“通交流”的特性, 信号就必须是交变的了——不一定要是正弦交流电, 但至少相比电容要变化得足够快, 否则电容无法正常工作. 上面的放大电路, 由于$u_i$和$u_o$的“-”端都与发射极相连(一般来说$V_{BB}$会翻上去和$V_{CC}$合一, 因此$u_i,u_o$确实会共发射极), 因此又叫共射放大电路. 除了共射放大电路之外, 还有共基、共集放大电路, 这里都没有涉及. 频率特性由于本文一开始是为了电线实验而写,所以我也想写一下实验课中做的”放大器频率特性实验”的理论.但已经写了7k+字,太累了,这部分就以后再说吧. TODO","link":"/2021/04/04/%E4%BB%8E%E4%BA%8C%E6%9E%81%E7%AE%A1%E5%88%B0%E6%94%BE%E5%A4%A7%E5%99%A8-%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E7%90%86%E8%A7%A3%E6%94%BE%E5%A4%A7%E7%94%B5%E8%B7%AF/"},{"title":"Fourier方法专栏(二)-从傅里叶级数到傅里叶变换","text":"李辰剑 2020-12-14 写在前面自从大一学了傅里叶级数（并且没学好），大二的数理方法又错过了讲傅里叶变换的那节课（数理方法），就一直对傅里叶变换感觉懵懵懂懂，没学进去；虽然道理能搞懂、公式能照搬，但用起来总是感觉心里没底，缺乏信心；再加之傅里叶变换的具体方法和公式种类繁多，更让我摸不着头脑。由于计算物理要讲FFT, 便打算趁这个机会查缺补漏，把傅里叶变换没有搞懂的地方彻底搞懂（指我自己的问题），整理成笔记。 这系列笔记的内容应该包括： 从傅里叶级数到傅里叶变换的”推导“（是如何过渡过去的？） 这里便会牵涉到各种不同的傅里叶公式 ——这也是这篇笔记的内容.因此，这个系列的第一篇其实是”(二)”出于逻辑完整性，最开始的内容应该是傅里叶方法和傅里叶级数的引入，以及级数敛散性的讨论，因此这篇过渡到傅里叶变换的笔记就是(二)了; 什么？你问我(一)和后面的内容会不会填坑？我估计大概率不会(坏笑 关于傅里叶级数敛散性的一些讨论 -&gt;(一)（刘旭峰留下的坑，看了伍胜健的《数学分析II》中的相关内容才明白） 卷积的推导 -&gt; (三) DFT 和 FFT -&gt; (四) 从三角傅里叶级数到复傅里叶级数在高数课本中，给出的傅里叶级数公式为： \\label{Fourier_series} f(x)=\\frac{a_0}{2}+\\sum_{n=1}^\\infty (a_n\\cos nx+b_n \\sin nx) \\tag{1} 简单起见，我们假设函数$f(x)$没有瑕点，级数总能收敛 其中系数由积分给出： \\left\\{\\begin{array}{l} a_n=\\frac{1}{\\pi}\\int_\\pi^\\pi f(x)\\cos nx \\mathrm{d}x \\\\ b_n=\\frac{1}{\\pi}\\int_\\pi^\\pi f(x)\\sin nx \\mathrm{d}x \\\\ \\end{array}\\right.\\tag{2}这种做法的合理性来自于三角函数系的正交性: \\left\\{\\begin{array}{l} \\langle \\cos mx|\\cos nx\\rangle=\\pi\\delta_{mn},\\langle \\sin mx|\\sin nx\\rangle=\\pi\\delta_{mn} \\\\ \\langle \\cos mx|\\sin nx\\rangle=0 \\end{array}\\right.\\tag{3}其中，内积$\\langle\\cdot|\\cdot\\rangle$是由$[-\\pi, \\pi]$上的定积分定义的；对正弦函数而言，参数$n$不能为$0$, 而对余弦函数而言，$n$可以为零，但此时的正交关系为$\\langle\\cos nx|\\cos nx\\rangle=\\langle 1|1\\rangle=2\\pi$而非$\\pi$. 这个结果看上去非常美丽，但仍有一些问题： 为什么$n=0$的项要搞特殊？强迫症很痛苦啊！ 进一步来说，从数学上，为什么$n=0$的项很特殊呢？(显然我并不满足那个简单的定积分公式) 整个三角函数系看上去还是有点冗余/复杂. 如果能化成单参数的函数族就好了. 这个形式要求$f(x)$必须是以$2\\pi$为周期的函数，对一般函数不太好处理. 这个形式很不容易推广/过渡到傅里叶变换上. 所幸我这两天找到了一个巧妙的方法, 可以解决这些问题. 在$\\eqref{Fourier_series}$中，我们首先把把正弦项扔掉(或者说假定函数是偶函数)，只看余弦项: f(x)=\\frac{a_0}{2}+\\sum_{n=1}^\\infty a_n\\cos nx \\nonumber再把在正半轴上求和的余弦项分一半出来，翻到负半轴上求和： f(x)=\\sum_{n=-\\infty}^{-1}\\frac{a_n}{2}\\cos nx+\\frac{a_0}{2}+\\sum_{n=1}^{\\infty}\\frac{a_n}{2}\\cos nx=\\sum_{n=-\\infty}^\\infty \\frac{a_n}{2}\\cos nx\\tag{4}瞬间就统一了!整个式子变得更扁平化了, 那个原本搞特殊的$a_0$，现在也服服帖帖地收到求和号里去了. 但是问题还没有结束. . . 这个trick对正弦项来说并不能推广. 事实上——上式更好的用法是当作一个不严谨的insight, 作为一个入口. 我们一会儿会回来再看一个式子. 更好的做法是, 先向复数推广, 我们考虑下列复傅里叶级数: \\sum_{n=-\\infty}^{\\infty}e_ne^{inx},\\ e_n\\in\\mathbb{C}\\tag{5}函数系$(e^{inx})_{n=-\\infty}^{+\\infty}$的正交性比三角函数系更有意思, 也更令强迫症满意: \\begin{aligned} \\langle e^{imx}|e^{inx}\\rangle&=\\int_{-\\pi}^{\\pi}e^{imx}e^{inx}\\mathrm{d}x=\\int_{-\\pi}^{\\pi}e^{i(m+n)x}\\mathrm{d}x\\\\&=\\left.\\frac{e^{i(m+n)x}}{i(m+n)}\\right|_{-\\pi}^\\pi \\end{aligned}\\tag{6}等等, 这怎么好像和我们以前看到的不一样?当$m\\neq n$时上式并不一定为$0$，并没有得到我们期望的正交性. 啊, 让第二个指数项的指数加个负号就对了. . . 这不就是共轭内积的定义吗!大师我悟了!内积为什么要定义成共轭内积的样子?——不这样做, 就无法得出指数函数系$(e^{inx})_{n=-\\infty}^{+\\infty}$的正交性了. 改变后的式子为: \\begin{aligned} \\langle e^{imx}|e^{inx}\\rangle&=\\int_{-\\pi}^{\\pi}e^{imx}e^{-inx}\\mathrm{d}x=\\int_{-\\pi}^{\\pi}e^{i(m-n)x}\\mathrm{d}x\\\\ &=\\left.\\frac{e^{i(m-n)x}}{i(m-n)}\\right|_{-\\pi}^\\pi=\\frac{e^{i(m-n)\\pi}-e^{i(m-n)-\\pi}}{i(m-n)}=\\frac{2}{m-n}\\sin (m-n)\\pi=0 \\end{aligned}\\tag{7}当然, 看到分母上的$m-n$后, 我立马反应过来, 这应该是$m\\neq n$时的情况… 对于$m=n$的情况, 应该是: \\langle e^{inx}|e^{inx}\\rangle=\\int_{-\\pi}^\\pi e^{inx}e^{-inx}\\mathrm{d} x=\\int_{-\\pi}^\\pi 1\\ \\mathrm{d}x=2\\pi\\tag{8}于是统合起来就得到我们想要的函数系正交关系: \\langle e^{imx}|e^{inx}\\rangle=2\\pi\\delta_{mn}\\tag{9}值得注意的是: 这里的$mn$是任意整数, 不需要是正数;这比三角函数系更为推广. 这里的模长是$2\\pi$而不是三角函数的$\\pi$, 这是很关键的 事实上, 这是由于$e^{inx}e^{-imx}=(\\cos nx+i\\sin nx)(\\cos mx-i\\sin mx)=\\cos nx\\cos mx+\\sin nx\\sin mx$造成的(里面有三角函数的内积);”共轭”这一关键因素保证了另两项是相消的. 于是我们可以写出复数形式的、函数傅里叶级数展开: f(x)=\\sum^\\infty_{n=-\\infty}e_ne^{inx}\\tag{10}其中 e_n=\\frac{1}{2\\pi}\\int_{-\\pi}^\\pi f(x)(e^{inx})^*\\mathrm{d}x=\\frac{1}{2\\pi}\\int_{-\\pi}^\\pi f(x)e^{-inx}\\mathrm{d}x=\\frac{\\langle f(x)|e^{inx}\\rangle}{\\langle e^{inx}|e^{inx}\\rangle}\\tag{11}一般来说, $e_n$可以是复数. 为了加深对复数形式和三角形式的级数之间的关系的理解, 我们再做一讨论. 还记得前面那个被展开的三角形式傅里叶级数吗?我们换一种形式向负数展开: f(x)=\\sum_{n=-\\infty}^\\infty(c_n\\cos nx+s_n\\sin nx)\\\\=\\sum_{n=-\\infty}^\\infty(e_n\\cos nx+ie_n\\sin nx)\\label{Fourier_series_complex_form}\\tag{12}于是, 我们得到了傅里叶级数展开的两种系数关系. 在傅里叶级数的实形式$\\eqref{Fourier_series}$和复形式$\\eqref{Fourier_series_complex_form}$之间，我们有三套系数:$\\{a_0, (a_n)_{n=1}^{+\\infty}, (b_n)_{n=1}^{+\\infty}\\}, $ $\\{(c_n)_{n=-\\infty}^{+\\infty}, (s_n)_{n=-\\infty}^{+\\infty}\\}$和$(e_n)_{n=-\\infty}^{+\\infty}$. 由于傅里叶级数展开唯一，我们可以比较系数，从而给出它们之间的关系： \\left\\{\\begin{array}{l} c_{-n}+c_n=a_n,c_0=a_0\\\\-s_{-n}+s_n=b_n \\end{array}\\right., \\left\\{\\begin{array}{l} c_n=e_n\\\\s_n=ie_n \\end{array}\\right.\\tag{13}由右边可以得到$s_n=ic_n$, 带入左边的下面一式, 就可以得到$c_n$的方程组: \\left\\{\\begin{array}{l}\\label{LEQG_between_coef} c_{n}+c_{-n}=a_n,c_0=a_0\\\\ c_n-c_{-n}=-ib_n \\end{array}\\right., s_n=ic_n\\tag{14}由这一式, 我们就可以由三角形式的傅里叶级数解出复指数形式的傅里叶级数(的系数), 从而建立起了二者之间的联系. _这里是对前面的那个坑的交代_ 作为特例, 当函数为偶函数时, 正弦项$b_n$全为零, 有$c_n=c_{-n}$, 于是就可以得到之前所说的$c_n=\\frac{a_n}{2}$的形式, 通过将正数那边的级数翻转一半到负数上, 并使得形式统一(没错, 指的就是$a_0/2$你这个兔崽子). 这时的$s_n=ic_n=ia_n/2$, 正数和负数上的部分相互抵消. 可以看到, 从实到复、指标从正数(或者说自然数)推广到整数的过程是并不trivial的. 两种形式下的系数关系略显复杂(由线性方程组$\\eqref{LEQG_between_coef}$确定), 在偶函数这个特例里有一个比较简单的形式. 很巧地，指标从正数推广到整数(后面就会看到, 这是推广到傅里叶变换的不可或缺的一步)随着从实到复的推广自动完成了. 这是我始料未及的. 这在一定程度上源自于指数函数系$(e^{inx})_{n=-\\infty}^\\infty$在整数域$\\mathbb{Z}$(而不仅仅是正数域$\\mathbb{Z^+}$)上的正交性. 另一方面, 总体来说, 复指数形式的一切都比较简单, 更具有数学美和简洁性. 这表面上源自于指数含数系更好(更统一、更扁平)的正交性, 根本上则来源于 一个复数天然地包括了两个实数, 从而能携带比单个实数更多的信息 这一性质. 指数函数通过欧拉公式统括了正弦和余弦两个函数, 并使得最终的公式更为简洁. 从复傅里叶级数到傅里叶变换从三角形式到复指数形式, 我们已经向前迈进了一大步;但能处理的函数仍然仅限于周期为$2\\pi$的函数. 事实上, 对于具有任意周期$2T$的函数, 我们只要进行变换$\\hat{x}=\\frac \\pi T x\\leftrightarrow x=\\frac{T}{\\pi}\\hat{x}$ , 就可以很方便的构造出以$\\hat{x}$为自变量、以$2\\pi$为周期的函数:$g(\\hat{x})=f(\\frac{T}{\\pi}\\hat{x})=f(x)$. 相应地, 复指数傅里叶级数及其系数的生成公式为: g(\\hat{x})=\\sum^\\infty_{n=-\\infty}e_ne^{in\\hat{x}},\\quad e_n=\\frac{1}{2\\pi}\\int_{-\\pi}^\\pi g(\\hat{x})e^{-in\\hat{x}}\\mathrm{d}\\hat{x}\\tag{15}变换回$f(x)$的结果是: f(x)=\\sum^\\infty_{n=-\\infty}e_ne^{i\\frac{n\\pi}{T}x}\\\\ e_n=\\frac{1}{2\\pi}\\int_{-\\pi}^\\pi f(x)e^{-i\\frac{n\\pi}{T}x}\\mathrm{d}(\\frac{\\pi}{T}x)=\\frac{1}{2T}\\int_{-T}^T f(x)e^{-i\\frac{n\\pi}{T}x}\\mathrm{d}x\\tag{16}若令$k=\\frac{n\\pi}{T}$, 我们可以得到另一种等价的形式. 到这里, 我们完成了从定长周期到一般周期的推广.从针对周期函数的傅里叶级数到针对任意函数的傅里叶变换, 一个常用的想法是设想$T\\to\\infty$;所幸在我们的充分的前期铺垫下, 这一步会是很容易完成的. 令$T\\to\\infty$, 则周期函数$f(x)$就愈发接近任意函数;随着$T$作为分母愈发增大, $\\frac{n\\pi}{T}$就愈发稠密、愈发接近一个连续的谱. 将前述和式过渡到连续的积分形式, 就有: f(x)=\\sum^\\infty_{n=-\\infty}e_ne^{i\\frac{n\\pi}{T}x}\\to \\int_{-\\infty}^\\infty F(n)e^{i\\frac{n\\pi}{T}x}\\mathrm{d}n\\\\F(n)=\\frac{1}{2T}\\int_{T}^T f(x)e^{-i\\frac{n\\pi}{T}x}\\mathrm{d}x\\to\\frac{1}{2T}\\int_{-\\infty}^\\infty f(x)e^{-i\\frac{n\\pi}{T}x}\\mathrm{d}x\\tag{17}式中$F(n)\\in\\mathbb{C}$是$e_n$连续化的结果;其自变量$n$与$e_n$的下标是一致的, 函数的意义是在”$n$空间”中的”模式密度”. 实际情况中, 我们常常再进行一次变换, 将变量$n$替换为$k$, 以图令变量更为简洁: f(x)\\to\\int_{-\\infty}^\\infty F(k)e^{ikx}\\mathrm{d}k\\tag{18}这对$F(k), F(n)$间提出了约束关系(注意, 这说明了为什么二者会差一个系数):$F(n)\\mathrm{d}n=F(k)\\mathrm{d}k$ 考虑到$k=\\frac{\\pi}{T}x\\Leftrightarrow \\mathrm{d}k=\\frac{\\pi}{T}\\mathrm{d}n$, 带入上式我们就有$F(k)=F(n)\\frac{\\mathrm{d}n}{\\mathrm{d}k}=F(n)\\frac T\\pi$, 再带回傅里叶展开式就有: F(k)=\\frac T\\pi F(n)=\\frac1{2\\pi}\\int_{-\\infty}^\\infty f(x)e^{-ikx}\\mathrm{d}k\\\\f(x)=\\int_{-\\infty}^\\infty F(k)e^{ikx}\\mathrm{d}k\\tag{19}这就是大名鼎鼎的傅里叶变换. -OHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH!至此, 我们已经完整地推出了/过渡到了傅里叶变换的公式. 值得注意的几点包括: 这里的波数$k=\\frac{n\\pi}T$作为数学定义出现, 但仍然是与物理定义一致的. 随着$T$趋于无穷, 作为波数的$k=\\frac{n\\pi}{T}$的取值点也愈发稠密;只要考虑$F(k)$是连续函数, 我们总可以在那些无理点和没有取值的有理点补充定义, 将值补充定义为附近的有取值的$\\frac{n\\pi}{T}$点, 获得一个完整的连续函数. 这样一来, 说明$F(k)$”定义是合理的”. 通过这样推导得出的傅里叶变换, 我们自然而然地解决了正向变换中那个奇怪的负号问题($e^{-ikx}$)——它来自于复函数空间上的酉内积. 此外, 经有这一推导, 我们还自然地得出了傅里叶逆变换的公式. 它与正向变换的公式差了一个负号. (表面看上去是这样. ) 傅里叶变换有许多形式和许多种定义, 这里为了完整性列举如下： 一些书中为了对称性(说的就是你, 《数学物理方法》), 会采用另一种写法, 将正逆傅里叶变换中前面的系数统一写为$1/\\sqrt{2\\pi}$: \\mathcal{F}[f(x)]\\equiv F(k)=\\frac{1}{\\sqrt{2\\pi}}\\int_{-\\infty}^{+\\infty}f(x)e^{-ikx}\\mathrm{d}x\\\\ \\mathcal{F}^{-1}[F(k)]\\equiv f(t)=\\frac{1}{\\sqrt{2\\pi}}\\int_{-\\infty}^{+\\infty}F(k)e^{+ikx}\\mathrm{d}k\\\\\\tag{20} 摘自吴崇试《数学物理方法》 量子力学中， 由于宗量不同，傅里叶变换会有稍稍不同的形式: \\Phi(p)=\\frac{1}{\\sqrt{2\\pi\\hbar}}\\int_{-\\infty}^{+\\infty}\\Psi(x)e^{-ipx/\\hbar}\\mathrm{d}x\\\\ \\Psi(x)=\\frac{1}{\\sqrt{2\\pi\\hbar}}\\int_{-\\infty}^{+\\infty}\\Phi(x)e^{+ipx/\\hbar}\\mathrm{d}p\\\\\\tag{21} 定义在$n$空间上的傅里叶变换，好处是可以去掉前面的$2\\pi$系数. 一般形式为： F(n)=\\frac 1 T\\int_{-T/2}^{+T/2}f(t)e^{-i2\\pi nt/T}\\mathrm{d}t\\\\ f(t)=\\frac 1 T\\int_{-T/2}^{+T/2}F(n)e^{+i2\\pi nt/T}\\mathrm{d}n\\\\\\tag{22} 傅里叶分解可以推广到二维和三维.规律是宗量化为矢量、积分区域化为$\\mathbb{R^2},\\mathbb{R^3}$,前面的系数相应地乘以维数.例如，对于二维傅里叶变换，前述$n$空间形式化为： F(n_x,n_y)=\\frac 1 {W}\\frac 1 {H}\\int_{-W/2}^{+W/2}\\int_{-H/2}^{+H/2}f(x,y)e^{-i2\\pi nx/W}e^{-i2\\pi ny/H}\\mathrm{d}x\\mathrm{d}y\\tag{23}注意上式中我已经修改了一些变量的名字.这在图像处理中有很重要的应用. 又如, 对于量子力学中三维傅里叶变换的形式为: \\Phi(\\boldsymbol{p})=\\frac{1}{(2\\pi\\hbar)^{3/2}}\\int\\Psi(\\boldsymbol{x})e^{-i\\boldsymbol{p}\\cdot\\boldsymbol{x}/\\hbar}\\mathrm{d}\\tau\\\\ \\qquad:=\\frac{1}{(2\\pi\\hbar)^{3/2}}\\int_\\mathbb{R^3}\\Psi(\\boldsymbol{x})e^{-i\\boldsymbol{p}\\cdot\\boldsymbol{x}/\\hbar}\\mathrm{d}^3\\boldsymbol{x}\\\\\\tag{24} 总结总结一下. 以上3000字, 我们完成了这么几件事:** 将三角形式傅里叶级数拓展为复指数形式傅里叶级数 从实到复的拓展$\\mathbb{R}\\to\\mathbb{C}$ 求和指标从自然数向整数的拓展$n\\in\\mathbb{N}\\to n\\in\\mathbb{Z}$ 将固定周期函数的傅里叶级数拓展为任意周期函数的傅里叶级数 $(-\\pi, \\pi)\\to(-T, T)$ 将离散的傅里叶级数拓展为连续的傅里叶变换(及其逆变换) 从属于离散整数集的求和指标, 拓展为属于连续的实数集的积分变量:$n\\in \\mathbb{Z}\\to k\\in \\mathbb{R}$ 通过极限过程$T\\to+\\infty$完成 因而, 这一步拓展中包含了许多不严谨的部分;为$f, F$预设了许多美好的前提. 详细严谨的分析还是请参考数学分析. 傅里叶变换应用、形式繁多; 因此在最后列举了几种常用的傅里叶变换形式以供查阅. 李辰剑 2021-4-3修改","link":"/2021/04/03/Fourier%E6%96%B9%E6%B3%95%E4%B8%93%E6%A0%8F-%E4%BA%8C-%E4%BB%8E%E5%82%85%E9%87%8C%E5%8F%B6%E7%BA%A7%E6%95%B0%E5%88%B0%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/"}],"tags":[{"name":"电子","slug":"电子","link":"/tags/%E7%94%B5%E5%AD%90/"},{"name":"数学","slug":"数学","link":"/tags/%E6%95%B0%E5%AD%A6/"}],"categories":[]}